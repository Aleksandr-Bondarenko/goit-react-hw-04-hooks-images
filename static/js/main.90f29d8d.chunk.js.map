{"version":3,"sources":["components/imageGalleryItem/ImageGalleryItem.module.css","components/Button/Button.module.css","App.module.css","components/Searchbar/Searchbar.module.css","components/Searchbar/Searchbar.js","components/imageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Loader/Loader.js","components/Modal/Modal.js","services/images-finder-api.js","components/ImageGallery/ImageGallery.js","App.js","index.js","components/ImageGallery/ImageGallery.module.css","components/Modal/Modal.module.css"],"names":["module","exports","Searchbar","onSubmit","useState","searchImages","setSearchImages","className","s","searchbar","form","e","preventDefault","trim","toLowerCase","type","button","label","input","autoComplete","autoFocus","placeholder","name","value","onChange","currentTarget","ImageGalleryItem","images","handleOpenModal","map","id","tags","webformatURL","largeImageURL","item","onClick","src","alt","img","Button","handlePageIncrement","Load","color","height","width","timeout","style","margin","Modal","url","hideModal","window","addEventListener","overlay","modalLoader","modal","modalImg","api","fetchImages","query","page","fetch","then","response","ok","json","Promise","reject","Error","ImageGallery","searchQuery","setImages","status","setStatus","moreBtnShow","setMoreBtnShow","error","setError","modalShow","setModalShow","modalUrl","setModalUrl","modalTags","setModalTags","useEffect","prevImagesAmount","data","hits","prevImages","length","totalHits","scrollTo","catch","message","top","document","documentElement","scrollHeight","behavior","showModal","find","image","querySelector","overflowY","title","gallery","target","key","removeEventListener","App","setSearchQuery","setPage","app","inputValue","prevPage","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.90f29d8d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"ImageGalleryItem_item__GeWEN\",\"img\":\"ImageGalleryItem_img__2HoWq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__Ui5uo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__gmm3V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__RbX6u\",\"form\":\"Searchbar_form__1XRHO\",\"button\":\"Searchbar_button__35AQT\",\"label\":\"Searchbar_label__17Pt4\",\"input\":\"Searchbar_input__3Ihiz\"};","import { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport s from \"./Searchbar.module.css\";\n\nfunction Searchbar({ onSubmit }) {\n  const [searchImages, setSearchImages] = useState(\"\");\n\n  const handleSubmitQuery = (e) => {\n    e.preventDefault();\n\n    if (searchImages.trim(\" \") === \"\") {\n      setSearchImages(\"\");\n      return;\n    }\n\n    onSubmit(searchImages.toLowerCase());\n    setSearchImages(\"\");\n  };\n\n  const handleChangeInput = (e) => {\n    switch (e.currentTarget.name) {\n      case \"searchImages\":\n        setSearchImages(e.currentTarget.value);\n        break;\n\n      default:\n        return;\n    }\n  };\n\n  return (\n    <header className={s.searchbar}>\n      <form className={s.form} onSubmit={handleSubmitQuery}>\n        <button type=\"submit\" className={s.button}>\n          <span className={s.label}>Search</span>\n        </button>\n\n        <input\n          className={s.input}\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n          name=\"searchImages\"\n          value={searchImages}\n          onChange={handleChangeInput}\n        />\n      </form>\n    </header>\n  );\n}\n\nexport default Searchbar;\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func,\n};\n","import s from \"./ImageGalleryItem.module.css\";\nimport PropTypes from \"prop-types\";\n\nfunction ImageGalleryItem({ images, handleOpenModal }) {\n  return images.map(({ id, tags, webformatURL, largeImageURL }) => (\n    <li\n      className={s.item}\n      key={webformatURL} //Если на бэке случается баг с повторением картинок и id\n      // key={id}\n      onClick={() => handleOpenModal(id, tags, largeImageURL)}\n    >\n      <img src={webformatURL} alt={tags} className={s.img} />\n    </li>\n  ));\n}\n\nexport default ImageGalleryItem;\n\nImageGalleryItem.propTypes = {\n  images: PropTypes.arrayOf(PropTypes.shape),\n  onClickHandler: PropTypes.func,\n};\n","import PropTypes from \"prop-types\";\r\nimport s from \"./Button.module.css\";\r\n\r\nfunction Button({ handlePageIncrement }) {\r\n  return (\r\n    <button className={s.button} type=\"button\" onClick={handlePageIncrement}>\r\n      Load more\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default Button;\r\n\r\nButton.propTypes = {\r\n  handlePageIncrement: PropTypes.func,\r\n};\r\n","import Loader from \"react-loader-spinner\";\r\n\r\nfunction Load() {\r\n  return (\r\n    <Loader\r\n      type=\"ThreeDots\"\r\n      color=\"#303f9f\"\r\n      height={30}\r\n      width={60}\r\n      timeout={30000}\r\n      style={{ margin: \"0 auto\" }}\r\n    />\r\n  );\r\n}\r\n\r\nexport default Load;\r\n","import s from \"./Modal.module.css\";\r\nimport PropTypes from \"prop-types\";\r\nimport Load from \"../Loader/Loader\";\r\n\r\nfunction Modal({ url, tags, hideModal }) {\r\n  window.addEventListener(\"keydown\", hideModal);\r\n  return (\r\n    <div className={s.overlay} onClick={hideModal}>\r\n      <div className={s.modalLoader}>\r\n        <Load />\r\n      </div>\r\n      <div className={s.modal}>\r\n        <img src={url} alt={tags} className={s.modalImg} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Modal;\r\n\r\nModal.propTypes = {\r\n  url: PropTypes.string,\r\n  tags: PropTypes.string,\r\n  hideModal: PropTypes.func,\r\n};\r\n","const USER_KEY = \"22971640-b13f0b0978f0830ddac6b5885\";\r\n\r\nfunction fetchImages(query, page) {\r\n  return fetch(\r\n    `https://pixabay.com/api/?q=${query}&page=${page}&key=${USER_KEY}&image_type=photo&orientation=horizontal&per_page=12`\r\n  ).then((response) => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n\r\n    return Promise.reject(new Error(\"Oops, something went wrong!\"));\r\n  });\r\n}\r\n\r\nconst api = { fetchImages };\r\n\r\nexport default api;\r\n","import { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport ImageGalleryItem from \"../imageGalleryItem/ImageGalleryItem\";\nimport Button from \"../Button/Button\";\nimport Load from \"../Loader/Loader\";\nimport Modal from \"../Modal/Modal\";\nimport api from \"../../services/images-finder-api\";\nimport s from \"./ImageGallery.module.css\";\n\nfunction ImageGallery({ searchQuery, page, handlePageIncrement }) {\n  const [images, setImages] = useState([]);\n  const [status, setStatus] = useState(\"idle\");\n  const [moreBtnShow, setMoreBtnShow] = useState(false);\n  const [error, setError] = useState(null);\n  const [modalShow, setModalShow] = useState(false);\n  const [modalUrl, setModalUrl] = useState(null);\n  const [modalTags, setModalTags] = useState(null);\n\n  useEffect(() => {\n    setStatus(\"pending\");\n    if (searchQuery.trim(\" \") === \"\") {\n      setStatus(\"idle\");\n      return;\n    }\n\n    let prevImagesAmount = null;\n\n    api\n      .fetchImages(searchQuery, page)\n      .then((data) => {\n        page === 1\n          ? setImages(data.hits)\n          : setImages((prevImages) => {\n              prevImagesAmount = prevImages.length;\n              return [...prevImages, ...data.hits];\n            });\n\n        setStatus(\"resolved\");\n\n        // console.log(\"Всего картинок\", data.totalHits);\n        // console.log(\n        //   \"Количество картинок на странице ДО запроса:\",\n        //   prevImagesAmount\n        // );\n        // console.log(\"Кол-во картинок пришло с бекэнда:\", data.hits.length);\n\n        setMoreBtnShow(\n          data.totalHits > 12\n            ? prevImagesAmount + data.hits.length !== data.totalHits\n            : false\n        );\n\n        scrollTo();\n      })\n      .catch((error) => {\n        setStatus(\"rejected\");\n        setError(error.message);\n      });\n  }, [searchQuery, page, error]);\n\n  const scrollTo = () => {\n    return window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n  };\n\n  const showModal = (id, tags, url) => {\n    if (images.find((image) => image.id === id)) {\n      document.querySelector(\"body\").style.overflowY = \"hidden\";\n      setModalUrl(url);\n      setModalTags(tags);\n      setModalShow(true);\n    }\n  };\n\n  const hideModal = (e) => {\n    if (e.currentTarget === e.target || e.key === \"Escape\") {\n      document.querySelector(\"body\").style.overflowY = \"visible\";\n      setModalShow(false);\n      window.removeEventListener(\"keydown\", hideModal);\n    }\n  };\n\n  if (status === \"idle\") {\n    return <h1 className={s.title}>What are you interested now?</h1>;\n  }\n\n  if (status === \"pending\") {\n    return (\n      <>\n        {page === 1 ? (\n          <Load />\n        ) : (\n          <>\n            <ul className={s.gallery}>\n              <ImageGalleryItem images={images} handleOpenModal={showModal} />\n            </ul>\n            <Load />\n          </>\n        )}\n      </>\n    );\n  }\n\n  if (status === \"resolved\") {\n    return images.length === 0 ? (\n      <p className={s.message}>\n        Nothing was found, please try another request!\n      </p>\n    ) : (\n      <>\n        <ul className={s.gallery}>\n          <ImageGalleryItem images={images} handleOpenModal={showModal} />\n        </ul>\n        {moreBtnShow && <Button handlePageIncrement={handlePageIncrement} />}\n        {modalShow && (\n          <Modal url={modalUrl} tags={modalTags} hideModal={hideModal} />\n        )}\n      </>\n    );\n  }\n\n  if (status === \"rejected\") {\n    return <h1 className={s.error}>{error}</h1>;\n  }\n}\n\nexport default ImageGallery;\n\nImageGallery.propTypes = {\n  searchQuery: PropTypes.string,\n  page: PropTypes.number,\n  handlerPageIncrement: PropTypes.func,\n};\n","import { useState } from \"react\";\nimport Searchbar from \"./components/Searchbar/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery/ImageGallery\";\nimport s from \"./App.module.css\";\n\nfunction App() {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [page, setPage] = useState(null);\n\n  const handleSearchQueryOnSubmit = (inputValue) => {\n    setSearchQuery(inputValue);\n    setPage(1);\n  };\n\n  const handlePageIncrement = () => {\n    setPage((prevPage) => prevPage + 1);\n  };\n\n  return (\n    <div className={s.app}>\n      <Searchbar onSubmit={handleSearchQueryOnSubmit} />\n      <ImageGallery\n        searchQuery={searchQuery}\n        page={page}\n        handlePageIncrement={handlePageIncrement}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"ImageGallery_gallery__CnDF2\",\"title\":\"ImageGallery_title__2UmSH\",\"message\":\"ImageGallery_message__3pERM\",\"error\":\"ImageGallery_error__bju6b\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__t_zVa\",\"modal\":\"Modal_modal__1SnP9\",\"modalImg\":\"Modal_modalImg__2D-Xg\",\"modalLoader\":\"Modal_modalLoader__1lGo1\"};"],"sourceRoot":""}