(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,t,a){e.exports={item:"ImageGalleryItem_item__GeWEN",img:"ImageGalleryItem_img__2HoWq"}},13:function(e,t,a){e.exports={button:"Button_button__Ui5uo"}},15:function(e,t,a){e.exports={app:"App_app__gmm3V"}},20:function(e,t,a){},4:function(e,t,a){e.exports={searchbar:"Searchbar_searchbar__RbX6u",form:"Searchbar_form__1XRHO",button:"Searchbar_button__35AQT",label:"Searchbar_label__17Pt4",input:"Searchbar_input__3Ihiz"}},42:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(12),o=a.n(c),s=(a(20),a(3)),l=a(4),i=a.n(l),u=a(0);var m=function(e){var t=e.onSubmit,a=Object(n.useState)(""),r=Object(s.a)(a,2),c=r[0],o=r[1];return Object(u.jsx)("header",{className:i.a.searchbar,children:Object(u.jsxs)("form",{className:i.a.form,onSubmit:function(e){e.preventDefault(),""!==c.trim(" ")?(t(c.toLowerCase()),o("")):o("")},children:[Object(u.jsx)("button",{type:"submit",className:i.a.button,children:Object(u.jsx)("span",{className:i.a.label,children:"Search"})}),Object(u.jsx)("input",{className:i.a.input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",name:"searchImages",value:c,onChange:function(e){"searchImages"===e.currentTarget.name&&o(e.currentTarget.value)}})]})})},d=a(11),b=a(10),j=a.n(b);var h=function(e){var t=e.images,a=e.handleOpenModal;return t.map((function(e){var t=e.id,n=e.tags,r=e.webformatURL,c=e.largeImageURL;return Object(u.jsx)("li",{className:j.a.item,onClick:function(){return a(t,n,c)},children:Object(u.jsx)("img",{src:r,alt:n,className:j.a.img})},r)}))},g=a(13),O=a.n(g);var f=function(e){var t=e.handlePageIncrement;return Object(u.jsx)("button",{className:O.a.button,type:"button",onClick:t,children:"Load more"})},p=a(14),_=a.n(p);var x=function(){return Object(u.jsx)(_.a,{type:"ThreeDots",color:"#303f9f",height:30,width:60,timeout:3e4,style:{margin:"0 auto"}})},v=a(7),y=a.n(v);var S=function(e){var t=e.url,a=e.tags,n=e.hideModal;return window.addEventListener("keydown",n),Object(u.jsxs)("div",{className:y.a.overlay,onClick:n,children:[Object(u.jsx)("div",{className:y.a.modalLoader,children:Object(u.jsx)(x,{})}),Object(u.jsx)("div",{className:y.a.modal,children:Object(u.jsx)("img",{src:t,alt:a,className:y.a.modalImg})})]})};var w={fetchImages:function(e,t){return fetch("https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=").concat("22971640-b13f0b0978f0830ddac6b5885","&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.ok?e.json():Promise.reject(new Error("Oops, something went wrong!"))}))}},I=a(5),N=a.n(I);var M=function(e){var t=e.searchQuery,a=e.page,r=e.handlePageIncrement,c=Object(n.useState)([]),o=Object(s.a)(c,2),l=o[0],i=o[1],m=Object(n.useState)("idle"),b=Object(s.a)(m,2),j=b[0],g=b[1],O=Object(n.useState)(!1),p=Object(s.a)(O,2),_=p[0],v=p[1],y=Object(n.useState)(null),I=Object(s.a)(y,2),M=I[0],k=I[1],E=Object(n.useState)(!1),L=Object(s.a)(E,2),G=L[0],C=L[1],P=Object(n.useState)(null),H=Object(s.a)(P,2),T=H[0],q=H[1],F=Object(n.useState)(null),R=Object(s.a)(F,2),D=R[0],U=R[1];Object(n.useEffect)((function(){if(g("pending"),""!==t.trim(" ")){var e=null;w.fetchImages(t,a).then((function(t){i(1===a?t.hits:function(a){return e=a.length,[].concat(Object(d.a)(a),Object(d.a)(t.hits))}),g("resolved"),v(t.totalHits>12&&e+t.hits.length!==t.totalHits),z()})).catch((function(e){g("rejected"),k(e.message)}))}else g("idle")}),[t,a,M]);var z=function(){return window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},Q=function(e,t,a){l.find((function(t){return t.id===e}))&&(document.querySelector("body").style.overflowY="hidden",q(a),U(t),C(!0))};return"idle"===j?Object(u.jsx)("h1",{className:N.a.title,children:"What are you interested now?"}):"pending"===j?Object(u.jsx)(u.Fragment,{children:1===a?Object(u.jsx)(x,{}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("ul",{className:N.a.gallery,children:Object(u.jsx)(h,{images:l,handleOpenModal:Q})}),Object(u.jsx)(x,{})]})}):"resolved"===j?0===l.length?Object(u.jsx)("p",{className:N.a.message,children:"Nothing was found, please try another request!"}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("ul",{className:N.a.gallery,children:Object(u.jsx)(h,{images:l,handleOpenModal:Q})}),_&&Object(u.jsx)(f,{handlePageIncrement:r}),G&&Object(u.jsx)(S,{url:T,tags:D,hideModal:function e(t){t.currentTarget!==t.target&&"Escape"!==t.key||(document.querySelector("body").style.overflowY="visible",C(!1),window.removeEventListener("keydown",e))}})]}):"rejected"===j?Object(u.jsx)("h1",{className:N.a.error,children:M}):void 0},k=a(15),E=a.n(k);var L=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),o=Object(s.a)(c,2),l=o[0],i=o[1];return Object(u.jsxs)("div",{className:E.a.app,children:[Object(u.jsx)(m,{onSubmit:function(e){r(e),i(1)}}),Object(u.jsx)(M,{searchQuery:a,page:l,handlePageIncrement:function(){i((function(e){return e+1}))}})]})};o.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(L,{})}),document.getElementById("root"))},5:function(e,t,a){e.exports={gallery:"ImageGallery_gallery__CnDF2",title:"ImageGallery_title__2UmSH",message:"ImageGallery_message__3pERM",error:"ImageGallery_error__bju6b"}},7:function(e,t,a){e.exports={overlay:"Modal_overlay__t_zVa",modal:"Modal_modal__1SnP9",modalImg:"Modal_modalImg__2D-Xg",modalLoader:"Modal_modalLoader__1lGo1"}}},[[42,1,2]]]);
//# sourceMappingURL=main.90f29d8d.chunk.js.map